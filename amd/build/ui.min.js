define("tiny_panoptoltibutton/ui",["exports","tiny_panoptoltibutton/modal","core/modal_factory","./options","core/config"],(function(_exports,_modal,_modal_factory,_options,_config){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Tiny Panopto LTI Video ui helper.
   *
   * @module     tiny_panoptoltibutton/ui
   * @copyright  2023 Panopto
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.handleAction=void 0,_modal=_interopRequireDefault(_modal),_modal_factory=_interopRequireDefault(_modal_factory),_config=_interopRequireDefault(_config);_exports.handleAction=editor=>{displayDialogue(editor)};const getTemplateContext=(editor,data)=>{const baseUrl="".concat(_config.default.wwwroot,"/lib/editor/tiny/plugins/panoptoltibutton/panoptowrapper.html#"),unprovisionedError=encodeURIComponent((0,_options.getUnprovisionedError)(editor)),courseId=(0,_options.getCourseId)(editor),tool=encodeURIComponent(JSON.stringify((0,_options.getTool)(editor))),resourceBase=(0,_options.getResourceBase)(editor),wwwroot=encodeURIComponent((0,_options.getWwwroot)(editor)),contentItemPath=encodeURIComponent((0,_options.getContentItemPath)(editor)),fullUrl=baseUrl+"unprovisionerror=".concat(unprovisionedError)+"&courseid=".concat(courseId)+"&tool=".concat(tool)+"&resourcebase=".concat(resourceBase)+"&wwwroot=".concat(wwwroot)+"&contentitempath=".concat(contentItemPath);return Object.assign({},{iframe:fullUrl.toString()},data)},displayDialogue=async function(editor){let data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};editor.focus(!0);const modal=await _modal_factory.default.create({type:_modal.default.TYPE,templateContext:getTemplateContext(editor,data),large:!0,scrollable:!1}),$root=await modal.getRoot();let iframe=$root.find("iframe");iframe.css({width:"100%",height:"100%",border:"none"});let contentContainer=$root.find(".modal-dialog");contentContainer.css({"max-width":"55vw"});let bodyContainer=$root.find(".modal-body");bodyContainer.css({height:"81vh"}),modal.show(),window.closeModal=()=>{const closeButton=document.querySelector("#panopto-close");closeButton&&closeButton.click()}}}));

//# sourceMappingURL=ui.min.js.map